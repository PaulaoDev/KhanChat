!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=24)}({0:function(e,t,n){"use strict";e.exports={gen_id:function(){return Math.floor(1e3*Math.random())+Math.floor(1e3*Math.random())},session:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===t)return sessionStorage.getItem(e)?sessionStorage.getItem(e):null;null!==t&&(sessionStorage.getItem(e)||sessionStorage.setItem(e,t))},clear_input:function(){return $(".emit-message").val("")},user_on_exists:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return chat.peoples_add.includes(e.nome)},to_scroll:function(){var e=document.querySelector(".messages");$(".messages").animate({scrollTop:e.scrollHeight},"slow")},get_user:function(){return{id:user.user_id,nome:user.nome,icon:user.icon}},get_horario:function(){var e=new Date,t=function(e){return e<10?"0"+e:e},n=[t(e.getHours()),t(e.getMinutes()),t(e.getSeconds())];return n[0]+":"+n[1]+":"+n[2]},html_element:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},removerAcentos:function(e){var t=e,n={a:/[\xE0-\xE6]/g,A:/[\xC0-\xC6]/g,e:/[\xE8-\xEB]/g,E:/[\xC8-\xCB]/g,i:/[\xEC-\xEF]/g,I:/[\xCC-\xCF]/g,o:/[\xF2-\xF6]/g,O:/[\xD2-\xD6]/g,u:/[\xF9-\xFC]/g,U:/[\xD9-\xDC]/g,c:/\xE7/g,C:/\xC7/g,n:/\xF1/g,N:/\xD1/g};for(var o in n){var a=n[o];t=t.replace(a,o)}return t},bot_write:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(document.querySelector.bind(document),1e4*t.length/t.length),o=0,a=t.length-1;setInterval(function(){var n=t[o];e.innerHTML=n,++o>a&&(o=0)},n)}}},24:function(e,t,n){"use strict";var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,a=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(0);a.gen_id,a.session;window.uploads=n(7);var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===t)return localStorage.getItem(e)?localStorage.getItem(e):null;null!==t&&(localStorage.getItem(e)||localStorage.setItem(e,t))};new Vue({el:"#app",data:{people:{email:null,senha:null,nome:null,icone:null},register:!1,upload:!1,loginSuccess:!1,loginError:!1,messageRegisterSuccess:!1,messageRegisterError:!1},methods:{apiRequest:function(e,t){return new Promise(function(n,o){fetch(e,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){n(e)})})},toggle:function(){this.people={email:null,senha:null,nome:null,icone:null},this.register=!this.register},loadRemember:function(){r("email")&&r("password")&&(this.people.email=r("email"),this.people.senha=r("password"))},remember:function(e){Object.keys(e).map(function(t){return r(t,e[t])})},uploadImage:function(e){var t=this;if(this.upload)return!1;var n=o(e.target.files,1)[0],a=document.querySelector(".btn-file-up");uploaded("../../../upload/imagem",n).then(function(e){t.upload=!0,t.people.icone=e.path,a.style.cursor="default",a.addEventListener("click",function(){return!1})})},success_login:function(e){this.remember(e);var t=location.hash.slice(1);t&&t.includes("room/")?location.href=location.origin+t.replace("#/room/"):(console.log("Room"),location.href="/room")},login:function(){var e=this,t={email:this.people.email,password:this.people.senha};this.apiRequest("../../../users/auth",t).then(function(n){"success"===n.msg?(e.loginSuccess=!0,setTimeout(function(){return e.success_login(t)},3500)):(e.loginError=!0,setTimeout(function(){return e.loginError=!1},3500))})},userRegister:function(){var e=this,t={email:this.people.email,password:this.people.senha,username:this.people.nome,icon:this.people.icone,created_at:new Date,updated_at:new Date};this.apiRequest("../../../users/new",t).then(function(n){console.log(t),"success"===n.msg?e.messageRegisterSuccess=!0:e.messageRegisterError=!0})}}}).loadRemember()},7:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(0),r=(a.gen_id,a.session,a.clear_input,a.user_on_exists,a.to_scroll,a.get_user),i=a.get_horario;window.uploaded=function(e,t){return new Promise(function(n,o){var a=new FormData;a.append("fileUpload",t),fetch(e,{method:"POST",body:a}).then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(e){return o(e)})})},e.exports.image_upload=function(){$(this).parent().html('<label class="btn btn-file-upload" style="cursor:pointer">Image Upload<input type="file" style="display: none;" class="image-upload" accept="image/*"></label>'),$(".image-upload").change(function(){var e=$(this).prop("files")[0];uploaded("../../../upload/imagem",e,function(e){if("success"===e.msg){command_toggle();var t='\n\t\t\t\t\t<button class="btn-link" onclick="apagar_luz(this)" style="border:none;background:#3498db;cursor:pointer">Apagar Luz</button>\n\t\t\t\t\t<img src="'+e.path+'" class="upload"/>\n\t\t\t\t';socket.emit("chat",o({},chat.sala+"message",Object.assign({},r(),{text:t,horario:i()})))}})})},e.exports.video_upload=function(){$(this).parent().html('<label class="btn btn-file-upload" style="cursor:pointer">Video Upload<input type="file" style="display: none;" class="video-upload" accept="video/*"></label>'),$(".video-upload").change(function(){var e=$(this).prop("files")[0];uploaded("../../../upload/video",e,function(e){if("success"===e.msg){command_toggle();var t=e.path.split(".").pop(),n='\n\t\t\t\t\t<button class="btn-link" onclick="apagar_luz(this)" style="border:none;background:#3498db;cursor:pointer">Apagar Luz</button>\n\t\t\t\t\t<video class="video-upload upload" controls><source src="'+e.path+'" type="video/'+t+'"></video>\n\t\t\t\t';socket.emit("chat",o({},chat.sala+"message",Object.assign({},r(),{text:n,horario:i()})))}})})},e.exports.audio_upload=function(){$(this).parent().html('<label class="btn btn-file-upload" style="cursor:pointer">Audio Upload<input type="file" style="display: none;" class="video-upload" accept="audio/*"></label>'),$(".video-upload").change(function(){var e=$(this).prop("files")[0];uploaded("../../../upload/audio",e,function(e){if("success"===e.msg){command_toggle();var t=e.path.split(".").pop(),n='\n\t\t\t\t\t<button class="btn-link" onclick="apagar_luz(this)" style="border:none;background:#3498db;cursor:pointer">Apagar Luz</button>\n\t\t\t\t\t<audio class="audio-upload upload" controls><source src="'+e.path+'" type="audio/'+t+'"></audio>\n\t\t\t\t';socket.emit("chat",o({},chat.sala+"message",Object.assign({},r(),{text:n,horario:i()})))}})})},e.exports.codigo_upload=function(){$(this).parent().html('<label class="btn btn-file-upload" style="cursor:pointer">Codigo Upload<input type="file" style="display: none;" class="code-upload" accept=".js,.html,.php,.css,.sass,.scss,.rb,.py,.ts,.c,.go,.rar"></label>'),$(".code-upload").change(function(){var e=$(this).prop("files")[0];uploaded("../../../upload/arquivo",e,function(e){if("success"===e.msg){command_toggle();var t={js:"#f7df1e",php:"#4f5b93",rar:"#8e44ad",css:"#00a98f",html:"#e34f26",default:"#f39c12"},n=e.path.split(".").pop(),a=t[n]?t[n]:t.default;console.log(a);var s='\n\t\t\t\t\t<a href="'+e.path+'" class="btn-link upload-up" style="background:'+a+';border:none;cursor:pointer;" download>Fazer download: '+e.path.split("/").pop()+"</a>\t\n\t\t\t\t";"rar"!==n&&(s='\n\t\t\t\t\t\t<a class="btn-link" target="__blank" href="./code/'+e.path.split("/").pop()+'" style="border:none;background:#3498db;cursor:pointer;width:40%;">Visualizar Codigo</button>\n\t\t\t\t\t\t'+s+"\n\t\t\t\t\t"),socket.emit("chat",o({},chat.sala+"message",Object.assign({},r(),{text:s,horario:i()})))}})})},e.exports.help_chat=function(){$(this).parent().html('<div class="helped"><a href="mailto:jskhanframework@gmail.com?Subject=KhanChat" target="__blank"><div class="help-item"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i><p class="entry">jskhanframework@gmail.com</p></div></a><a href="https://github.com/PaulaoDev" target="__blank"><div class="help-item"><i class="fa fa-github fa-lg" aria-hidden="true"></i><p class="entry">PaulaoDev</p></div></div></a>')}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXBwL3B1YmxpYy9zcmMvanMvbW9kdWxlcy91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvcHVibGljL3NyYy9qcy9sb2dpbi5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvcHVibGljL3NyYy9qcy9tb2R1bGVzL3VwbG9hZHMuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZW5faWQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzZXNzaW9uIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0SXRlbSIsImNsZWFyX2lucHV0IiwiJCIsInZhbCIsInVzZXJfb25fZXhpc3RzIiwiY2hhdCIsInBlb3BsZXNfYWRkIiwiaW5jbHVkZXMiLCJub21lIiwidG9fc2Nyb2xsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsImdldF91c2VyIiwiaWQiLCJ1c2VyIiwidXNlcl9pZCIsImljb24iLCJnZXRfaG9yYXJpbyIsImhvcmFyaW8iLCJEYXRlIiwicHJlZml4IiwiaCIsIl9yZWYiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiaHRtbF9lbGVtZW50IiwiaHRtbCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJmaXJzdENoaWxkIiwicmVtb3ZlckFjZW50b3MiLCJuZXdTdHJpbmdDb21BY2VudG8iLCJzdHJpbmciLCJtYXBhQWNlbnRvc0hleCIsImEiLCJBIiwiZSIsIkUiLCJJIiwiTyIsInUiLCJVIiwiQyIsIk4iLCJsZXRyYSIsImV4cHJlc3Nhb1JlZ3VsYXIiLCJyZXBsYWNlIiwiYm90X3dyaXRlIiwib3V0IiwiZW50cnlzIiwiY291dCIsImFjdGl2ZSIsImVuZCIsInNldEludGVydmFsIiwid2luZG93IiwidXBsb2FkcyIsImxvY2FsIiwibG9jYWxTdG9yYWdlIiwiVnVlIiwiZWwiLCJkYXRhIiwicGVvcGxlIiwiZW1haWwiLCJzZW5oYSIsImljb25lIiwicmVnaXN0ZXIiLCJ1cGxvYWQiLCJsb2dpblN1Y2Nlc3MiLCJsb2dpbkVycm9yIiwibWVzc2FnZVJlZ2lzdGVyU3VjY2VzcyIsIm1lc3NhZ2VSZWdpc3RlckVycm9yIiwibWV0aG9kcyIsImFwaVJlcXVlc3QiLCJ1cmwiLCJQcm9taXNlIiwiUmVzb2x2ZSIsIlJlamVjdCIsImZldGNoIiwibWV0aG9kIiwiY3JlZGVudGlhbHMiLCJoZWFkZXJzIiwiQWNjZXB0IiwiQ29udGVudC1UeXBlIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwidG9nZ2xlIiwidGhpcyIsImxvYWRSZW1lbWJlciIsInJlbWVtYmVyIiwia2V5cyIsIm1hcCIsInVwbG9hZEltYWdlIiwiZXZlbnQiLCJfdGhpcyIsImZpbGUiLCJfc2xpY2VkVG9BcnJheSIsInRhcmdldCIsImZpbGVzIiwiYnV0dG9uIiwidXBsb2FkZWQiLCJwYXRoIiwic3R5bGUiLCJjdXJzb3IiLCJhZGRFdmVudExpc3RlbmVyIiwic3VjY2Vzc19sb2dpbiIsImhhc2giLCJsb2NhdGlvbiIsInNsaWNlIiwiaHJlZiIsIm9yaWdpbiIsImNvbnNvbGUiLCJsb2ciLCJsb2dpbiIsIl90aGlzMiIsInBhc3N3b3JkIiwicmVzIiwibXNnIiwic2V0VGltZW91dCIsInVzZXJSZWdpc3RlciIsIl90aGlzMyIsInVzZXJuYW1lIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJmb3JtIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJjYXRjaCIsImVyciIsImltYWdlX3VwbG9hZCIsInBhcmVudCIsInRwbCIsImNoYW5nZSIsInByb3AiLCJjb21tYW5kX3RvZ2dsZSIsInRlbXAiLCJzb2NrZXQiLCJlbWl0IiwiX2RlZmluZVByb3BlcnR5Iiwic2FsYSIsImFzc2lnbiIsInRleHQiLCJ2aWRlb191cGxvYWQiLCJ1cCIsImV4dCIsInNwbGl0IiwicG9wIiwiYXVkaW9fdXBsb2FkIiwiY29kaWdvX3VwbG9hZCIsImNvcmVzIiwianMiLCJwaHAiLCJyYXIiLCJjc3MiLCJkZWZhdWx0IiwiY29yIiwiaGVscF9jaGF0Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFB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d0RRLEVBQUcxQyxLQUYzRCxpQkFFZ0YyQyxFQUZoRix1QkFJSlIsT0FBT0MsS0FBSyxPQUFaQyxLQUNFNUksS0FBSzZJLEtBQU8sVUFBWWxMLE9BQU9tTCxVQUFXcEksS0FDMUNxSSxLQUFRTixFQUNSekgsUUFBV0QsY0FRakIvRCxFQUFPRCxRQUFRdU0sY0FBZ0IsV0FFOUJ6SixFQUFFNEYsTUFBTTJDLFNBQVMzRyxLQURiNEcsa05BRUp4SSxFQUFFLGdCQUFnQnlJLE9BQU8sV0FDeEIsSUFBSXJDLEVBQU9wRyxFQUFFNEYsTUFBTThDLEtBQUssU0FBUyxHQUNqQ2pDLFNBQVMsMEJBQTJCTCxFQUFNLFNBQVNnRCxHQUNsRCxHQUFjLFlBQVhBLEVBQUcxQixJQUFrQixDQUN2QmlCLGlCQUNBLElBQUllLEdBQ0hDLEdBQU0sVUFDTkMsSUFBTyxVQUNQQyxJQUFPLFVBQ1BDLElBQU8sVUFDUGxJLEtBQVEsVUFDUm1JLFFBQVcsV0FFUlYsRUFBTUQsRUFBRzFDLEtBQUs0QyxNQUFNLEtBQUtDLE1BQ3pCUyxFQUFPTixFQUFNTCxHQUFRSyxFQUFNTCxHQUFPSyxFQUFBLFFBQ3RDdEMsUUFBUUMsSUFBSTJDLEdBQ1osSUFBSXBCLDBCQUNRUSxFQUFHMUMsS0FEWCxrREFDaUVzRCxFQURqRSwwREFDOEhaLEVBQUcxQyxLQUFLNEMsTUFBTSxLQUFLQyxNQURqSixtQkFHTyxRQUFSRixJQUNGVCxxRUFDcURRLEVBQUcxQyxLQUFLNEMsTUFBTSxLQUFLQyxNQUR4RSw4R0FFR1gsRUFGSCxnQkFLREMsT0FBT0MsS0FBSyxPQUFaQyxLQUNFNUksS0FBSzZJLEtBQU8sVUFBWWxMLE9BQU9tTCxVQUFXcEksS0FDMUNxSSxLQUFRTixFQUNSekgsUUFBV0QsY0FRakIvRCxFQUFPRCxRQUFRK00sVUFBWSxXQUUxQmpLLEVBQUU0RixNQUFNMkMsU0FBUzNHLEtBRGI0RyIsImZpbGUiOiJsb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyNCk7XG4iLCJjb25zdCBnZW5faWQgPSAoKSA9PiB7XHJcblx0cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDApICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCk7XHJcbn07XHJcblxyXG5jb25zdCBzZXNzaW9uID0gKG5hbWUsIHZhbHVlID0gbnVsbCkgPT4ge1xyXG4gIGlmKHZhbHVlID09PSBudWxsKXsgXHJcbiAgICAgIGlmKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0obmFtZSkpe1xyXG4gICAgICAgIHJldHVybiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKG5hbWUpO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gIH1cclxuICBpZih2YWx1ZSAhPT0gbnVsbCl7XHJcbiAgICAgIGlmKCFzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKG5hbWUpKXtcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKG5hbWUsIHZhbHVlKTtcclxuICAgICAgfVxyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGNsZWFyX2lucHV0ID0gKCkgPT4gJCgnLmVtaXQtbWVzc2FnZScpLnZhbCgnJyk7XHJcblxyXG5jb25zdCB1c2VyX29uX2V4aXN0cyA9IChwLCBlICA9ICdkZWZhdWx0JykgPT4ge1xyXG4gIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5wZW9wbGVzLXRpbWVsaW5lPmRpdltpZD1cIiR7cC5pZH1cIl1gKVxyXG4gIHJldHVybiBjaGF0LnBlb3BsZXNfYWRkLmluY2x1ZGVzKHAubm9tZSk7XHJcbn07XHJcblxyXG5jb25zdCB0b19zY3JvbGwgPSAoKSA9PiB7XHJcbiAgdmFyIG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZXMnKTtcclxuICAkKCcubWVzc2FnZXMnKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiBvLnNjcm9sbEhlaWdodCB9LCAnc2xvdycpO1xyXG59XHJcblxyXG5jb25zdCBnZXRfdXNlciA9ICgpID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICdpZCc6IHVzZXIudXNlcl9pZCxcclxuICAgICAgJ25vbWUnOiB1c2VyLm5vbWUsXHJcbiAgICAgICdpY29uJzogdXNlci5pY29uXHJcbiAgICB9O1xyXG59O1xyXG5cclxuY29uc3QgZ2V0X2hvcmFyaW8gPSAoKSA9PiB7XHJcbiAgdmFyIGhvcmFyaW8gPSBuZXcgRGF0ZSgpO1xyXG4gIHZhciBwcmVmaXggPSAoaCkgPT4gKGggPCAxMCkgPyBcIjBcIiArIGggOiBoO1xyXG4gIHZhciBbaG9yYSwgbWludXRvcywgc2VndW5kb3NdID0gW1xyXG4gICAgcHJlZml4KGhvcmFyaW8uZ2V0SG91cnMoKSksXHJcbiAgICBwcmVmaXgoaG9yYXJpby5nZXRNaW51dGVzKCkpLFxyXG4gICAgcHJlZml4KGhvcmFyaW8uZ2V0U2Vjb25kcygpKVxyXG4gIF07XHJcbiAgcmV0dXJuIGhvcmEgKyAnOicgKyBtaW51dG9zICsgJzonICsgc2VndW5kb3M7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBodG1sX2VsZW1lbnQoaHRtbCkge1xyXG4gICAgdmFyIGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGQuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgIHJldHVybiBkLmZpcnN0Q2hpbGQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZXJBY2VudG9zKCBuZXdTdHJpbmdDb21BY2VudG8gKSB7XHJcbiAgdmFyIHN0cmluZyA9IG5ld1N0cmluZ0NvbUFjZW50bztcclxuICB2YXIgbWFwYUFjZW50b3NIZXggPSB7XHJcbiAgICAgIGEgOiAvW1xceEUwLVxceEU2XS9nLFxyXG4gICAgICBBIDogL1tcXHhDMC1cXHhDNl0vZyxcclxuICAgICAgZSA6IC9bXFx4RTgtXFx4RUJdL2csXHJcbiAgICAgIEUgOiAvW1xceEM4LVxceENCXS9nLFxyXG4gICAgICBpIDogL1tcXHhFQy1cXHhFRl0vZyxcclxuICAgICAgSSA6IC9bXFx4Q0MtXFx4Q0ZdL2csXHJcbiAgICAgIG8gOiAvW1xceEYyLVxceEY2XS9nLFxyXG4gICAgICBPIDogL1tcXHhEMi1cXHhENl0vZyxcclxuICAgICAgdSA6IC9bXFx4RjktXFx4RkNdL2csXHJcbiAgICAgIFUgOiAvW1xceEQ5LVxceERDXS9nLFxyXG4gICAgICBjIDogL1xceEU3L2csXHJcbiAgICAgIEMgOiAvXFx4QzcvZyxcclxuICAgICAgbiA6IC9cXHhGMS9nLFxyXG4gICAgICBOIDogL1xceEQxL2csXHJcbiAgfTtcclxuICBmb3IgKCB2YXIgbGV0cmEgaW4gbWFwYUFjZW50b3NIZXggKSB7XHJcbiAgICB2YXIgZXhwcmVzc2FvUmVndWxhciA9IG1hcGFBY2VudG9zSGV4W2xldHJhXTtcclxuICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKCBleHByZXNzYW9SZWd1bGFyLCBsZXRyYSApO1xyXG4gIH1cclxuICByZXR1cm4gc3RyaW5nO1xyXG59XHJcblxyXG5jb25zdCBib3Rfd3JpdGUgPSAob3V0LCBlbnRyeXMgPSBbXSkgPT4ge1xyXG4gIGxldCAkID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvci5iaW5kKGRvY3VtZW50KTtcclxuICBsZXQgY291dCA9IChlbnRyeXMubGVuZ3RoICogMTAwMDApIC8gZW50cnlzLmxlbmd0aDtcclxuICBsZXQgYWN0aXZlID0gMDsgXHJcbiAgbGV0IGVuZCA9IGVudHJ5cy5sZW5ndGggLSAxO1xyXG4gIGNvbnN0IHdfYm90ID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgdmFyIGEgPSBlbnRyeXNbYWN0aXZlXTtcclxuICAgIG91dC5pbm5lckhUTUwgPSBhO1xyXG4gICAgYWN0aXZlKys7XHJcbiAgICBpZihhY3RpdmUgPiBlbmQpIGFjdGl2ZSA9IDA7XHJcbiAgfSwgY291dCk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHsgXHJcbiAgZ2VuX2lkLCBcclxuICBzZXNzaW9uLCBcclxuICBjbGVhcl9pbnB1dCxcclxuICB1c2VyX29uX2V4aXN0cyxcclxuICB0b19zY3JvbGwsXHJcbiAgZ2V0X3VzZXIsXHJcbiAgZ2V0X2hvcmFyaW8sXHJcbiAgaHRtbF9lbGVtZW50LFxyXG4gIHJlbW92ZXJBY2VudG9zLFxyXG4gIGJvdF93cml0ZVxyXG59OyIsImNvbnN0IHsgZ2VuX2lkLCBzZXNzaW9uIH0gPSByZXF1aXJlKCcuL21vZHVsZXMvdXRpbHMnKTtcclxud2luZG93LnVwbG9hZHMgPSByZXF1aXJlKCcuL21vZHVsZXMvdXBsb2FkcycpO1xyXG5cclxuY29uc3QgbG9jYWwgPSAobmFtZSwgdmFsdWUgPSBudWxsKSA9PiB7XHJcbiAgaWYodmFsdWUgPT09IG51bGwpeyBcclxuICAgICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0obmFtZSkpe1xyXG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShuYW1lKTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuICB9XHJcbiAgaWYodmFsdWUgIT09IG51bGwpe1xyXG4gICAgICBpZighbG9jYWxTdG9yYWdlLmdldEl0ZW0obmFtZSkpe1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKG5hbWUsIHZhbHVlKTtcclxuICAgICAgfVxyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGFwcCA9IG5ldyBWdWUoe1xyXG4gIGVsOiAnI2FwcCcsXHJcbiAgZGF0YToge1xyXG4gICAgcGVvcGxlOiB7XHJcbiAgICBcdGVtYWlsOiBudWxsLFxyXG4gICAgXHRzZW5oYTogbnVsbCxcclxuICAgIFx0bm9tZTogbnVsbCxcclxuICAgIFx0aWNvbmU6IG51bGxcclxuICAgIH0sXHJcbiAgICByZWdpc3RlcjogZmFsc2UsXHJcbiAgICB1cGxvYWQ6IGZhbHNlLFxyXG4gICAgbG9naW5TdWNjZXNzOiBmYWxzZSxcclxuICAgIGxvZ2luRXJyb3I6IGZhbHNlLFxyXG4gICAgbWVzc2FnZVJlZ2lzdGVyU3VjY2VzczogZmFsc2UsXHJcbiAgICBtZXNzYWdlUmVnaXN0ZXJFcnJvcjogZmFsc2VcclxuICB9LFxyXG4gIG1ldGhvZHM6IHtcclxuICBcdGFwaVJlcXVlc3QodXJsLCBkYXRhKXtcclxuICBcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChSZXNvbHZlLCBSZWplY3QpID0+IHtcclxuICBcdFx0XHQgIGZldGNoKHVybCwge1xyXG5cdFx0XHQgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxyXG4gICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICB9LFxyXG5cdFx0XHQgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuXHRcdFx0ICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdCAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG5cdFx0XHQgIH0pLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG5cdFx0XHQgICAgUmVzb2x2ZShkYXRhKTtcclxuXHRcdFx0ICB9KTtcclxuICBcdFx0fSk7XHJcbiAgXHR9LFxyXG4gIFx0dG9nZ2xlKCl7XHJcbiAgXHRcdHRoaXMucGVvcGxlID0ge1xyXG5cdCAgICBcdGVtYWlsOiBudWxsLFxyXG5cdCAgICBcdHNlbmhhOiBudWxsLFxyXG5cdCAgICBcdG5vbWU6IG51bGwsXHJcblx0ICAgIFx0aWNvbmU6IG51bGxcclxuXHQgICAgfTtcclxuICBcdFx0dGhpcy5yZWdpc3RlciA9ICF0aGlzLnJlZ2lzdGVyO1xyXG4gIFx0fSxcclxuICBcdGxvYWRSZW1lbWJlcigpe1xyXG4gIFx0ICBpZihsb2NhbCgnZW1haWwnKSAmJiBsb2NhbCgncGFzc3dvcmQnKSl7XHJcbiAgICAgICAgICB0aGlzLnBlb3BsZS5lbWFpbCA9IGxvY2FsKCdlbWFpbCcpO1xyXG4gICAgICAgICAgdGhpcy5wZW9wbGUuc2VuaGEgPSBsb2NhbCgncGFzc3dvcmQnKTtcclxuICAgICAgfVxyXG4gIFx0fSxcclxuICBcdHJlbWVtYmVyKGRhdGEpe1xyXG4gIFx0ICAgIE9iamVjdC5rZXlzKGRhdGEpLm1hcCgoZSkgPT4gbG9jYWwoZSwgZGF0YVtlXSkpO1xyXG4gIFx0fSxcclxuICBcdHVwbG9hZEltYWdlKGV2ZW50KXtcclxuICAgICAgaWYodGhpcy51cGxvYWQpIHJldHVybiBmYWxzZTtcclxuICBcdFx0bGV0IFsgZmlsZSBdID0gZXZlbnQudGFyZ2V0LmZpbGVzO1xyXG4gICAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG4tZmlsZS11cFwiKTtcclxuICAgICAgdXBsb2FkZWQoJy4uLy4uLy4uL3VwbG9hZC9pbWFnZW0nLCBmaWxlKS50aGVuKGV2ZW50ID0+IHtcclxuICAgICAgICB0aGlzLnVwbG9hZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5wZW9wbGUuaWNvbmUgPSBldmVudC5wYXRoO1xyXG4gICAgICAgIGJ1dHRvbi5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIFx0fSxcclxuICBcdHN1Y2Nlc3NfbG9naW4oZGF0YSl7XHJcbiAgXHRcdHRoaXMucmVtZW1iZXIoZGF0YSk7XHJcblx0ICAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaC5zbGljZSgxKTtcclxuXHQgICAgaWYoaGFzaCAmJiBoYXNoLmluY2x1ZGVzKCdyb29tLycpKXtcclxuXHQgICAgICBcdGxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbi5vcmlnaW4gKyBoYXNoLnJlcGxhY2UoJyMvcm9vbS8nKTtcclxuXHQgICAgfWVsc2V7XHJcblx0ICAgIFx0Y29uc29sZS5sb2coXCJSb29tXCIpO1xyXG5cdCAgICAgIFx0bG9jYXRpb24uaHJlZiA9ICcvcm9vbSc7XHJcblx0ICAgIH1cclxuICBcdH0sXHJcbiAgXHRsb2dpbigpe1xyXG4gIFx0XHRsZXQgZW1haWwgPSB0aGlzLnBlb3BsZS5lbWFpbDtcclxuICBcdFx0bGV0IHNlbmhhID0gdGhpcy5wZW9wbGUuc2VuaGE7XHJcbiAgXHRcdGxldCBkYXRhID0ge1xyXG4gIFx0XHRcdGVtYWlsOiBlbWFpbCxcclxuICBcdFx0XHRwYXNzd29yZDogc2VuaGFcclxuICBcdFx0fTtcclxuICBcdFx0dGhpcy5hcGlSZXF1ZXN0KFwiLi4vLi4vLi4vdXNlcnMvYXV0aFwiLCBkYXRhKS50aGVuKChyZXMpID0+IHtcclxuICBcdFx0XHRpZihyZXMubXNnID09PSBcInN1Y2Nlc3NcIil7XHJcbiAgICAgICAgICB0aGlzLmxvZ2luU3VjY2VzcyA9IHRydWU7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc3VjY2Vzc19sb2dpbihkYXRhKSwgMzUwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7IFxyXG4gICAgICAgICAgdGhpcy5sb2dpbkVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2dpbkVycm9yID0gZmFsc2UsIDM1MDApO1xyXG4gICAgICAgIH1cclxuICBcdFx0fSk7XHJcbiAgXHR9LFxyXG4gIFx0dXNlclJlZ2lzdGVyKCl7XHJcbiAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIGVtYWlsOiB0aGlzLnBlb3BsZS5lbWFpbCxcclxuICAgICAgICBwYXNzd29yZDogdGhpcy5wZW9wbGUuc2VuaGEsXHJcbiAgICAgICAgdXNlcm5hbWU6IHRoaXMucGVvcGxlLm5vbWUsXHJcbiAgICAgICAgaWNvbjogdGhpcy5wZW9wbGUuaWNvbmUsXHJcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcclxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuYXBpUmVxdWVzdChcIi4uLy4uLy4uL3VzZXJzL25ld1wiLCBkYXRhKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICBpZihyZXMubXNnID09PSBcInN1Y2Nlc3NcIil7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VSZWdpc3RlclN1Y2Nlc3MgPSB0cnVlO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlUmVnaXN0ZXJFcnJvciA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICBcdH1cclxuICB9XHJcbn0pO1xyXG5cclxuYXBwLmxvYWRSZW1lbWJlcigpO1xyXG4iLCJjb25zdCB7IFxyXG5cdGdlbl9pZCwgXHJcblx0c2Vzc2lvbiwgXHJcblx0Y2xlYXJfaW5wdXQsXHJcblx0dXNlcl9vbl9leGlzdHMsXHJcblx0dG9fc2Nyb2xsLFxyXG5cdGdldF91c2VyLFxyXG5cdGdldF9ob3JhcmlvXHJcbn0gPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcblxyXG53aW5kb3cudXBsb2FkZWQgPSAodXJsLCBmaWxlKSA9PiBuZXcgUHJvbWlzZSgoUmVzb2x2ZSwgUmVqZWN0KSA9PiB7XHJcblxyXG5cdHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICBmb3JtLmFwcGVuZCgnZmlsZVVwbG9hZCcsIGZpbGUpO1xyXG5cclxuXHRmZXRjaCh1cmwsIHtcclxuXHQgICAgbWV0aG9kOiAnUE9TVCcsXHJcblx0ICAgIGJvZHk6IGZvcm1cclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAgIC50aGVuKGRhdGEgPT4gUmVzb2x2ZShkYXRhKSlcclxuICAgIC5jYXRjaChlcnIgPT4gUmVqZWN0KGVycikpO1xyXG5cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbWFnZV91cGxvYWQgPSBmdW5jdGlvbigpe1xyXG5cdGxldCB0cGwgPSBgPGxhYmVsIGNsYXNzPVwiYnRuIGJ0bi1maWxlLXVwbG9hZFwiIHN0eWxlPVwiY3Vyc29yOnBvaW50ZXJcIj5JbWFnZSBVcGxvYWQ8aW5wdXQgdHlwZT1cImZpbGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCIgY2xhc3M9XCJpbWFnZS11cGxvYWRcIiBhY2NlcHQ9XCJpbWFnZS8qXCI+PC9sYWJlbD5gO1xyXG5cdCQodGhpcykucGFyZW50KCkuaHRtbCh0cGwpO1xyXG5cdCQoJy5pbWFnZS11cGxvYWQnKS5jaGFuZ2UoZnVuY3Rpb24oKXtcclxuXHRcdHZhciBmaWxlID0gJCh0aGlzKS5wcm9wKCdmaWxlcycpWzBdO1xyXG5cdFx0dXBsb2FkZWQoJy4uLy4uLy4uL3VwbG9hZC9pbWFnZW0nLCBmaWxlLCBmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRpZihkYXRhLm1zZyA9PT0gXCJzdWNjZXNzXCIpe1xyXG5cdFx0XHRcdGNvbW1hbmRfdG9nZ2xlKCk7XHJcblx0XHRcdFx0bGV0IHRlbXAgPSBgXHJcblx0XHRcdFx0XHQ8YnV0dG9uIGNsYXNzPVwiYnRuLWxpbmtcIiBvbmNsaWNrPVwiYXBhZ2FyX2x1eih0aGlzKVwiIHN0eWxlPVwiYm9yZGVyOm5vbmU7YmFja2dyb3VuZDojMzQ5OGRiO2N1cnNvcjpwb2ludGVyXCI+QXBhZ2FyIEx1ejwvYnV0dG9uPlxyXG5cdFx0XHRcdFx0PGltZyBzcmM9XCIke2RhdGEucGF0aH1cIiBjbGFzcz1cInVwbG9hZFwiLz5cclxuXHRcdFx0XHRgO1xyXG5cdFx0XHRcdHNvY2tldC5lbWl0KCdjaGF0Jywge1xyXG5cdFx0XHRcdFx0W2NoYXQuc2FsYSArIFwibWVzc2FnZVwiXTogT2JqZWN0LmFzc2lnbih7fSwgZ2V0X3VzZXIoKSwge1xyXG5cdFx0XHRcdFx0XHQndGV4dCc6IHRlbXAsXHJcblx0XHRcdFx0XHRcdCdob3JhcmlvJzogZ2V0X2hvcmFyaW8oKVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG4gICAgICAgIH0pO1xyXG5cdH0pO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMudmlkZW9fdXBsb2FkID0gZnVuY3Rpb24oKXtcclxuXHRsZXQgdHBsID0gYDxsYWJlbCBjbGFzcz1cImJ0biBidG4tZmlsZS11cGxvYWRcIiBzdHlsZT1cImN1cnNvcjpwb2ludGVyXCI+VmlkZW8gVXBsb2FkPGlucHV0IHR5cGU9XCJmaWxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiIGNsYXNzPVwidmlkZW8tdXBsb2FkXCIgYWNjZXB0PVwidmlkZW8vKlwiPjwvbGFiZWw+YDtcclxuXHQkKHRoaXMpLnBhcmVudCgpLmh0bWwodHBsKTtcclxuXHQkKCcudmlkZW8tdXBsb2FkJykuY2hhbmdlKGZ1bmN0aW9uKCl7XHJcblx0XHR2YXIgZmlsZSA9ICQodGhpcykucHJvcCgnZmlsZXMnKVswXTtcclxuXHRcdHVwbG9hZGVkKCcuLi8uLi8uLi91cGxvYWQvdmlkZW8nLCBmaWxlLCBmdW5jdGlvbih1cCl7XHJcblx0XHRcdGlmKHVwLm1zZyA9PT0gXCJzdWNjZXNzXCIpe1xyXG5cdFx0XHRcdGNvbW1hbmRfdG9nZ2xlKCk7XHJcblx0XHRcdFx0bGV0IGV4dCA9IHVwLnBhdGguc3BsaXQoJy4nKS5wb3AoKTtcclxuXHRcdFx0XHRsZXQgdGVtcCA9IGBcclxuXHRcdFx0XHRcdDxidXR0b24gY2xhc3M9XCJidG4tbGlua1wiIG9uY2xpY2s9XCJhcGFnYXJfbHV6KHRoaXMpXCIgc3R5bGU9XCJib3JkZXI6bm9uZTtiYWNrZ3JvdW5kOiMzNDk4ZGI7Y3Vyc29yOnBvaW50ZXJcIj5BcGFnYXIgTHV6PC9idXR0b24+XHJcblx0XHRcdFx0XHQ8dmlkZW8gY2xhc3M9XCJ2aWRlby11cGxvYWQgdXBsb2FkXCIgY29udHJvbHM+PHNvdXJjZSBzcmM9XCIke3VwLnBhdGh9XCIgdHlwZT1cInZpZGVvLyR7ZXh0fVwiPjwvdmlkZW8+XHJcblx0XHRcdFx0YDtcclxuXHRcdFx0XHRzb2NrZXQuZW1pdCgnY2hhdCcsIHtcclxuXHRcdFx0XHRcdFtjaGF0LnNhbGEgKyBcIm1lc3NhZ2VcIl06IE9iamVjdC5hc3NpZ24oe30sIGdldF91c2VyKCksIHtcclxuXHRcdFx0XHRcdFx0J3RleHQnOiB0ZW1wLFxyXG5cdFx0XHRcdFx0XHQnaG9yYXJpbyc6IGdldF9ob3JhcmlvKClcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMuYXVkaW9fdXBsb2FkID0gZnVuY3Rpb24oKXtcclxuXHRsZXQgdHBsID0gYDxsYWJlbCBjbGFzcz1cImJ0biBidG4tZmlsZS11cGxvYWRcIiBzdHlsZT1cImN1cnNvcjpwb2ludGVyXCI+QXVkaW8gVXBsb2FkPGlucHV0IHR5cGU9XCJmaWxlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiIGNsYXNzPVwidmlkZW8tdXBsb2FkXCIgYWNjZXB0PVwiYXVkaW8vKlwiPjwvbGFiZWw+YDtcclxuXHQkKHRoaXMpLnBhcmVudCgpLmh0bWwodHBsKTtcclxuXHQkKCcudmlkZW8tdXBsb2FkJykuY2hhbmdlKGZ1bmN0aW9uKCl7XHJcblx0XHR2YXIgZmlsZSA9ICQodGhpcykucHJvcCgnZmlsZXMnKVswXTtcclxuXHRcdHVwbG9hZGVkKCcuLi8uLi8uLi91cGxvYWQvYXVkaW8nLCBmaWxlLCBmdW5jdGlvbih1cCl7XHJcblx0XHRcdGlmKHVwLm1zZyA9PT0gXCJzdWNjZXNzXCIpe1xyXG5cdFx0XHRcdGNvbW1hbmRfdG9nZ2xlKCk7XHJcblx0XHRcdFx0bGV0IGV4dCA9IHVwLnBhdGguc3BsaXQoJy4nKS5wb3AoKTtcclxuXHRcdFx0XHRsZXQgdGVtcCA9IGBcclxuXHRcdFx0XHRcdDxidXR0b24gY2xhc3M9XCJidG4tbGlua1wiIG9uY2xpY2s9XCJhcGFnYXJfbHV6KHRoaXMpXCIgc3R5bGU9XCJib3JkZXI6bm9uZTtiYWNrZ3JvdW5kOiMzNDk4ZGI7Y3Vyc29yOnBvaW50ZXJcIj5BcGFnYXIgTHV6PC9idXR0b24+XHJcblx0XHRcdFx0XHQ8YXVkaW8gY2xhc3M9XCJhdWRpby11cGxvYWQgdXBsb2FkXCIgY29udHJvbHM+PHNvdXJjZSBzcmM9XCIke3VwLnBhdGh9XCIgdHlwZT1cImF1ZGlvLyR7ZXh0fVwiPjwvYXVkaW8+XHJcblx0XHRcdFx0YDtcclxuXHRcdFx0XHRzb2NrZXQuZW1pdCgnY2hhdCcsIHtcclxuXHRcdFx0XHRcdFtjaGF0LnNhbGEgKyBcIm1lc3NhZ2VcIl06IE9iamVjdC5hc3NpZ24oe30sIGdldF91c2VyKCksIHtcclxuXHRcdFx0XHRcdFx0J3RleHQnOiB0ZW1wLFxyXG5cdFx0XHRcdFx0XHQnaG9yYXJpbyc6IGdldF9ob3JhcmlvKClcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMuY29kaWdvX3VwbG9hZCA9IGZ1bmN0aW9uKCl7XHJcblx0bGV0IHRwbCA9IGA8bGFiZWwgY2xhc3M9XCJidG4gYnRuLWZpbGUtdXBsb2FkXCIgc3R5bGU9XCJjdXJzb3I6cG9pbnRlclwiPkNvZGlnbyBVcGxvYWQ8aW5wdXQgdHlwZT1cImZpbGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCIgY2xhc3M9XCJjb2RlLXVwbG9hZFwiIGFjY2VwdD1cIi5qcywuaHRtbCwucGhwLC5jc3MsLnNhc3MsLnNjc3MsLnJiLC5weSwudHMsLmMsLmdvLC5yYXJcIj48L2xhYmVsPmA7XHJcblx0JCh0aGlzKS5wYXJlbnQoKS5odG1sKHRwbCk7XHJcblx0JCgnLmNvZGUtdXBsb2FkJykuY2hhbmdlKGZ1bmN0aW9uKCl7XHJcblx0XHR2YXIgZmlsZSA9ICQodGhpcykucHJvcCgnZmlsZXMnKVswXTtcclxuXHRcdHVwbG9hZGVkKCcuLi8uLi8uLi91cGxvYWQvYXJxdWl2bycsIGZpbGUsIGZ1bmN0aW9uKHVwKXtcclxuXHRcdFx0aWYodXAubXNnID09PSBcInN1Y2Nlc3NcIil7XHJcblx0XHRcdFx0Y29tbWFuZF90b2dnbGUoKTtcclxuXHRcdFx0XHRsZXQgY29yZXMgPSB7XHJcblx0XHRcdFx0XHRcImpzXCI6IFwiI2Y3ZGYxZVwiLFxyXG5cdFx0XHRcdFx0XCJwaHBcIjogXCIjNGY1YjkzXCIsXHJcblx0XHRcdFx0XHRcInJhclwiOiBcIiM4ZTQ0YWRcIixcclxuXHRcdFx0XHRcdFwiY3NzXCI6IFwiIzAwYTk4ZlwiLFxyXG5cdFx0XHRcdFx0XCJodG1sXCI6IFwiI2UzNGYyNlwiLFxyXG5cdFx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiI2YzOWMxMlwiXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRsZXQgZXh0ID0gdXAucGF0aC5zcGxpdCgnLicpLnBvcCgpO1xyXG5cdFx0XHRcdHZhciBjb3IgPSAoY29yZXNbZXh0XSkgPyBjb3Jlc1tleHRdIDogY29yZXNbXCJkZWZhdWx0XCJdO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGNvcik7XHJcblx0XHRcdFx0bGV0IHRlbXAgPSBgXHJcblx0XHRcdFx0XHQ8YSBocmVmPVwiJHt1cC5wYXRofVwiIGNsYXNzPVwiYnRuLWxpbmsgdXBsb2FkLXVwXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiR7Y29yfTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtcIiBkb3dubG9hZD5GYXplciBkb3dubG9hZDogJHt1cC5wYXRoLnNwbGl0KCcvJykucG9wKCl9PC9hPlx0XHJcblx0XHRcdFx0YDtcclxuXHRcdFx0XHRpZihleHQgIT09IFwicmFyXCIpe1xyXG5cdFx0XHRcdFx0dGVtcCA9IGBcclxuXHRcdFx0XHRcdFx0PGEgY2xhc3M9XCJidG4tbGlua1wiIHRhcmdldD1cIl9fYmxhbmtcIiBocmVmPVwiLi9jb2RlLyR7dXAucGF0aC5zcGxpdCgnLycpLnBvcCgpfVwiIHN0eWxlPVwiYm9yZGVyOm5vbmU7YmFja2dyb3VuZDojMzQ5OGRiO2N1cnNvcjpwb2ludGVyO3dpZHRoOjQwJTtcIj5WaXN1YWxpemFyIENvZGlnbzwvYnV0dG9uPlxyXG5cdFx0XHRcdFx0XHQke3RlbXB9XHJcblx0XHRcdFx0XHRgO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRzb2NrZXQuZW1pdCgnY2hhdCcsIHtcclxuXHRcdFx0XHRcdFtjaGF0LnNhbGEgKyBcIm1lc3NhZ2VcIl06IE9iamVjdC5hc3NpZ24oe30sIGdldF91c2VyKCksIHtcclxuXHRcdFx0XHRcdFx0J3RleHQnOiB0ZW1wLFxyXG5cdFx0XHRcdFx0XHQnaG9yYXJpbyc6IGdldF9ob3JhcmlvKClcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMuaGVscF9jaGF0ID0gZnVuY3Rpb24oKXtcclxuXHRsZXQgdHBsID0gYDxkaXYgY2xhc3M9XCJoZWxwZWRcIj48YSBocmVmPVwibWFpbHRvOmpza2hhbmZyYW1ld29ya0BnbWFpbC5jb20/U3ViamVjdD1LaGFuQ2hhdFwiIHRhcmdldD1cIl9fYmxhbmtcIj48ZGl2IGNsYXNzPVwiaGVscC1pdGVtXCI+PGkgY2xhc3M9XCJmYSBmYS1lbnZlbG9wZSBmYS1sZ1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48cCBjbGFzcz1cImVudHJ5XCI+anNraGFuZnJhbWV3b3JrQGdtYWlsLmNvbTwvcD48L2Rpdj48L2E+PGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9QYXVsYW9EZXZcIiB0YXJnZXQ9XCJfX2JsYW5rXCI+PGRpdiBjbGFzcz1cImhlbHAtaXRlbVwiPjxpIGNsYXNzPVwiZmEgZmEtZ2l0aHViIGZhLWxnXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjxwIGNsYXNzPVwiZW50cnlcIj5QYXVsYW9EZXY8L3A+PC9kaXY+PC9kaXY+PC9hPmA7XHJcblx0JCh0aGlzKS5wYXJlbnQoKS5odG1sKHRwbCk7XHJcbn07XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=